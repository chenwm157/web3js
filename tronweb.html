<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tronweb</title>
</head>
<body>
    <style>
        table {
            border-right: 1px solid #000000;
            border-bottom: 1px solid #000000;
            text-align: center;
            
        }
        
        table th {
            border-left: 1px solid #000000;
            border-top: 1px solid #000000;
            padding: 10px;
        }
        
        table td {
            border-left: 1px solid #000000;
            border-top: 1px solid #000000;
            padding: 10px;
        }
    </style>
    <table id="tb">
        <tr>
            <th>地址</th>
            <th>质押数量</th>
            <th>解锁时间</th>
        </tr>
        
    </table>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        addresss=[ 
            'TCq5Vce9FAH8nAphK2jB1uDmeUfqKELzBB',    
            'TMMWFvGMjhhSvEhYyq4SKebhWFaxvCRvPq',    
            'TVNtPWTtxm8txaijowbPgNbskcZC4K6HXk',    
            'TUh1R5t6Yri3gAvRC29Z5QeSVGnttpde3h',    
            'TPTmpaKuzxQ3AMoVp8S3PfQCW6L5xXMG1x'     
        ]

        getdata = async(_address)=>{      

            url = 'https://apilist.tronscanapi.com/api/account/resource?limit=500&start=0&address='+ _address +'&type=2&resourceType=0'
            res = await axios.get(url)

            zysl = []
            jssj = []
            
            for(i=0;i<res.data.data.length;i++){
                    // console.log(res.data.data[i])
                    num = res.data.data[i].frozenBalance
                    t = res.data.data[i].timestamp
                    // console.log(num,t)
                    s = new Date().getTime()
                    a = t/1000 + 60*60*24*3 - s/1000  
                    h = 0
                    m = 0
                    s = 0
                    if(a>0){       
                        h = parseInt(a/60/60)
                        m = parseInt(a/60%60)
                        s = parseInt(a%60) 
                    }
                    // num传入的数字，n需要的字符长度
                    function PrefixInteger(num, n) {
                        return (Array(n).join(0) + num).slice(-n);
                    }
                    
                    t = PrefixInteger(h,2) + ':' + PrefixInteger(m,2) + ':' + PrefixInteger(s,2)
                    
                    zysl.push(num/1000000)
                    jssj.push(t)                    

                }

                doc = document.getElementById('tb')
                for(i=0;i<zysl.length;i++) {
                    if(i == 0){
                        tr = document.createElement('tr')
                        td1 = document.createElement('td')
                        td1.innerHTML = _address.slice(0,6) + '...' + _address.slice(-6)
                        td1.rowSpan = zysl.length
                        td2 = document.createElement('td')
                        td2.innerHTML = zysl[i]
                        td3 = document.createElement('td')
                        td3.innerHTML = jssj[i]
                        tr.appendChild(td1)
                        tr.appendChild(td2)
                        tr.appendChild(td3)
                        doc.appendChild(tr)
                    }else{
                        tr = document.createElement('tr')
                        // td1 = document.createElement('td')
                        // td1.innerHTML = _address.slice(0,4) + '...' + _address.slice(-4)
                        // td1.colSpan = zysl.length
                        td2 = document.createElement('td')
                        td2.innerHTML = zysl[i]
                        td3 = document.createElement('td')
                        td3.innerHTML = jssj[i]
                        // tr.appendChild(td1)
                        tr.appendChild(td2)
                        tr.appendChild(td3)
                        doc.appendChild(tr)
                    }
                }
                
                
        }
        main = ()=>{
            
            for(adr = 0;adr<addresss.length;adr++){                  
               
                ((_adr)=>{
                    setTimeout(()=>{getdata(_adr)},(adr+1)*500)
                })(addresss[adr])
      
            }
        }
        main()
    </script>
</body>
</html>
