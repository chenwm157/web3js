<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tronweb</title>
</head>
<body>
    <table id="tb">
        <tr>
            <th>地址</th>
            <th>质押数量</th>
            <th>解锁时间</th>
        </tr>
        
    </table>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        addresss=[ 
            'TCq5Vce9FAH8nAphK2jB1uDmeUfqKELzBB',    
            'TMMWFvGMjhhSvEhYyq4SKebhWFaxvCRvPq',    
            'TVNtPWTtxm8txaijowbPgNbskcZC4K6HXk',    
            'TUh1R5t6Yri3gAvRC29Z5QeSVGnttpde3h',    
            'TPTmpaKuzxQ3AMoVp8S3PfQCW6L5xXMG1x'     
        ]

        getdata = async(_address)=>{      

            url = 'https://apilist.tronscanapi.com/api/account/resource?limit=500&start=0&address='+ _address +'&type=2&resourceType=0'
            res = await axios.get(url)
            
            for(i=0;i<res.data.data.length;i++){
                    // console.log(res.data.data[i])
                    num = res.data.data[i].frozenBalance
                    t = res.data.data[i].timestamp
                    // console.log(num,t)
                    s = new Date().getTime()
                    a = t/1000 + 60*60*24*3 - s/1000  
                    h = 0
                    m = 0
                    s = 0
                    if(a>0){       
                        h = parseInt(a/60/60)
                        m = parseInt(a/60%60)
                        s = parseInt(a%60) 
                    }
                    // num传入的数字，n需要的字符长度
                    function PrefixInteger(num, n) {
                        return (Array(n).join(0) + num).slice(-n);
                    }
                    
                    t = PrefixInteger(h,2) + ':' + PrefixInteger(m,2) + ':' + PrefixInteger(s,2)
                    
                    
                    doc = document.getElementById('tb')
                   
                    tr = document.createElement('tr')
                    td1 = document.createElement('td')
                    td1.innerHTML = _address.slice(0,4) + '...' + _address.slice(-4)
                    td2 = document.createElement('td')
                    td2.innerHTML = num/1000000
                    td3 = document.createElement('td')
                    td3.innerHTML = t
                    tr.appendChild(td1)
                    tr.appendChild(td2)
                    tr.appendChild(td3)
                    doc.appendChild(tr)

                }
                
        }
        main = ()=>{
            
            for(adr = 0;adr<addresss.length;adr++){                  
               
                ((_adr)=>{
                    setTimeout(()=>{getdata(_adr)},(adr+1)*500)
                })(addresss[adr])
      
            }
        }
        main()
    </script>
</body>
</html>
